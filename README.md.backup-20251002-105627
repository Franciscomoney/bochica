# Bochica - Decentralized Micro-Lending Platform

A blockchain-powered micro-lending platform built on Polkadot's parachain architecture, enabling investors to fund projects and entrepreneurs to access capital with transparent, on-chain transactions.

## ğŸš€ Current Status: MVP Deployed on OVH

**Live Demo**: https://51.178.253.51:8100

**Admin Dashboard**: https://51.178.253.51:8100/admin
- Username: `admin`
- Password: `Bochica2025!`

---

## âœ… Recent Changes (October 2025)

### Migration to OVH Server
- **Moved from Vultr to OVH** (51.178.253.51:8100)
- Running on PM2 for process management
- HTTPS with self-signed certificates
- Supabase connected and working

### Kickstarter-Style UI Redesign
- **Purple-themed branding** (#7C3AED)
- **BOCHICA logo** in purple text
- **Kickstarter-like project cards** with image placeholders
- **Account dropdown** with balance display
- Cleaner navigation: "Discover" and "Start a project"
- Thin progress bars matching Kickstarter style

### Custom Interest Rates
- **Creators can set their own interest rate** (0-100%)
- Interest rate field added to project creation form
- Database migration required: `interest_rate DECIMAL(5, 2)` column

### Working Features
- âœ… **Project Creation** - Full CRUD with Supabase
- âœ… **Project Browsing** - Grid view with real data
- âœ… **Project Details** - Individual project pages
- âœ… **Admin Dashboard** - Stats and transaction monitoring
- âœ… **Role Switcher** - Toggle between Investor/Creator
- âœ… **Wallet Integration** - Talisman connection working
- âœ… **Real-time Balances** - Asset Hub & Moonbeam

---

## ğŸ“ Project Structure

```
bochica/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx              âœ… Main layout with WalletProvider
â”‚   â”œâ”€â”€ page.tsx                âœ… Home with role switcher
â”‚   â”œâ”€â”€ projects/page.tsx       âœ… Browse projects (Kickstarter style)
â”‚   â”œâ”€â”€ create-project/page.tsx âœ… Create project with interest rate
â”‚   â”œâ”€â”€ project/[id]/page.tsx   âœ… Project detail view
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”œâ”€â”€ page.tsx            âœ… Admin login
â”‚   â”‚   â””â”€â”€ dashboard/page.tsx  âœ… Admin dashboard
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ auth/admin/route.ts âœ… Admin authentication
â”œâ”€â”€ components/
â”‚   â””â”€â”€ Header.tsx              âœ… Purple logo + dropdown
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ WalletContext.tsx       âœ… Wallet state management
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts             âœ… Database client
â”‚   â”œâ”€â”€ polkadot.ts             âœ… Blockchain integration
â”‚   â””â”€â”€ financial.ts            âœ… Financial calculations
â”œâ”€â”€ supabase-setup.sql          âœ… Initial database schema
â”œâ”€â”€ add-interest-rate.sql       âœ… Migration for interest rates
â””â”€â”€ .env.local                  âœ… Environment variables
```

---

## ğŸ¨ UI/UX Changes

### Header
- Purple "BOCHICA" logo (SVG text)
- Navigation links: "Discover" | "Start a project"
- Account dropdown with:
  - User avatar (initials)
  - Wallet address
  - Asset Hub balance
  - Moonbeam balance
  - Disconnect button

### Projects Page
- Kickstarter-style card layout
- Purple gradient image placeholders
- "FUNDED" badge for completed projects
- Thin progress bars
- "pledged of $X" language
- Hover effects on titles

### Color Scheme
- **Primary**: Purple (#7C3AED)
- **Success**: Green (#10B981)
- **Background**: Gray (#F9FAFB)

---

## ğŸ”§ Database Schema Updates

### New Column: `interest_rate`
Run this migration in Supabase SQL Editor:

```sql
ALTER TABLE projects
ADD COLUMN IF NOT EXISTS interest_rate DECIMAL(5, 2) DEFAULT 5.00;

COMMENT ON COLUMN projects.interest_rate IS 'Interest rate the creator is willing to pay (0-100%)';
```

### Complete Tables
- âœ… `projects` - With interest_rate field
- âœ… `commitments` - Investor commitments
- âœ… `loans` - Borrower loans
- âœ… `transactions` - All financial movements
- âœ… `user_balances` - Balance tracking

---

## ğŸ› ï¸ Tech Stack

**Frontend**:
- Next.js 14 (App Router)
- React 18
- TypeScript
- Tailwind CSS

**Blockchain**:
- Polkadot.js API
- Talisman Wallet
- XCM Protocol
- Asset Hub (USDT storage)
- Moonbeam (operations)

**Backend**:
- Next.js API Routes
- Supabase (PostgreSQL)
- PM2 Process Manager
- HTTPS (self-signed cert)

---

## ğŸš€ Deployment (OVH Server)

**Server**: 51.178.253.51
**Port**: 8100 (HTTPS)
**PM2 Process**: `bochica`

### PM2 Commands
```bash
# SSH to OVH
ssh -i /root/coding/claudecode/projects/ovh/keys/ovh_master debian@51.178.253.51

# Manage process
pm2 list
pm2 restart bochica
pm2 logs bochica
pm2 stop bochica
```

### File Location
`/home/debian/bochica/`

---

## â³ Pending Features

### Investment Workflow
- [ ] Commit funds to projects
- [ ] XCM transfer UI (Asset Hub â†’ Moonbeam)
- [ ] Lockup period selection
- [ ] Investment history

### Borrowing Workflow
- [ ] Borrow against funded amount
- [ ] Repayment with custom interest
- [ ] Loan status tracking
- [ ] Automatic interest calculation

### Project Editing
- [ ] Edit project details
- [ ] Update interest rate
- [ ] Change funding goal
- [ ] Project status management

### User Dashboard
- [ ] Portfolio overview
- [ ] Investment summary
- [ ] Created projects list
- [ ] Transaction history

### Additional Features
- [ ] Search projects
- [ ] Filter by category
- [ ] Real-time updates (Supabase subscriptions)
- [ ] Email notifications
- [ ] Project images upload
- [ ] Comments/updates

---

## ğŸ“Š Financial Rules

- **Platform Fee**: 2% on commitments and redemptions
- **Loan Interest**: Creator-defined (0-100%, default 5%)
- **Lockup Periods**: 24h, 72h, or 7 days
- **Lockup Enforcement**: Only when funds are borrowed

---

## ğŸ” Security

**Current State** (Development):
- Self-signed SSL certificate
- Basic authentication for admin
- Supabase RLS policies enabled
- HTTP-only cookies for sessions

**Before Production**:
- [ ] Get proper SSL certificate (Let's Encrypt)
- [ ] Implement rate limiting
- [ ] Add CSRF protection
- [ ] Security audit
- [ ] Input sanitization
- [ ] Penetration testing

---

## ğŸ“ Environment Variables

```env
# Supabase (Production)
NEXT_PUBLIC_SUPABASE_URL=https://fvehyzvdffnxrmupwgtv.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key

# Polkadot RPC Endpoints
NEXT_PUBLIC_ASSET_HUB_WSS=wss://polkadot-asset-hub-rpc.polkadot.io
NEXT_PUBLIC_MOONBEAM_WSS=wss://wss.api.moonbeam.network

# Platform Configuration
NEXT_PUBLIC_PLATFORM_FEE=0.02
NEXT_PUBLIC_USDT_ASSET_ID=1984

# Admin Credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=Bochica2025!
```

---

## ğŸ¯ Roadmap

**Phase 1**: âœ… Foundation (Complete)
- Wallet integration
- Database setup
- Admin dashboard
- Project CRUD

**Phase 2**: ğŸš§ Investment Features (In Progress)
- Investment workflow
- XCM transfers
- Borrowing system
- Repayment system

**Phase 3**: â³ Polish
- Real-time updates
- Notifications
- Search & filters
- Analytics

**Phase 4**: â³ Production
- Security audit
- Proper SSL
- Performance optimization
- Launch

---

## ğŸ“„ Admin Access

**URL**: https://51.178.253.51:8100/admin

**Features**:
- View all projects
- Monitor total funding
- Track active loans
- View platform fees collected
- See investor/borrower counts
- Recent transactions log

---

## ğŸ†˜ Troubleshooting

### Can't connect to OVH
```bash
# Use OVH management tool
/root/coding/claudecode/projects/ovh/ovh connect ovh-debian
```

### Database migration failed
1. Go to Supabase SQL Editor
2. Run migration SQL directly
3. Refresh page

### PM2 process crashed
```bash
pm2 restart bochica
pm2 logs bochica --lines 50
```

---

**Last Updated**: October 2, 2025
**Status**: MVP deployed, investment features pending
**License**: MIT
